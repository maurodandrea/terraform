name: test var
on:
  workflow_dispatch:
    inputs:
      tenant:
        description: 'The tenant inherent to the site'
        type: string
        required: true

# These permissions are needed to interact with GitHub's OIDC Token endpoint.
permissions:
  id-token: write
  contents: read

jobs:
  manual_deploy:
    name: manual trigger
    if: github.event_name == 'workflow_dispatch'
    runs-on: 'ubuntu-latest'

    concurrency:
      group: ${{ github.workflow }}-${{ inputs.environment }}
      cancel-in-progress: false

    steps:
      - name: Utilizza il valore estratto
        run: echo "Il valore della variabile di contesto è ${{ matrix.cdn_tenant }}"

      - name: iff
        if: ${{ github.event.inputs.tenant == 'A' }}
        run: echo "Il valore della variabile di contesto è ${{vars.CDN_PATH_A }}"

      - name: Set Variabile CDN1
        id: set-value-cdn1
        run: echo "::set-output name=cnd_url::$(if [[ "${{ inputs.tenant }}" == "A" ]]; then echo "${{ vars.CDN_PATH_A }}"; else echo "${{ vars.CDN_PATH_B }}"; fi )"

      - name: Set Variabile CDN2
        id: set-value-cdn
        run: |
          if [[ "${{ inputs.tenant }}" == "A" ]]; then
            echo "Valore di CDN_URL: ${{ vars.CDN_PATH_A }}"
          elif [[ "${{ inputs.tenant }}" == "B" ]]; then
            echo "Valore di CDN_URL: ${{ vars.CDN_PATH_B }}"
          else
            echo "TENANT non valido"
          fi
        

